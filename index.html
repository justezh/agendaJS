<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Agenda</title>
</head>

<body>
    <input id="tarefa" type="text" placeholder="Insira aqui sua tarefa"></input>
    <input id="seleciona-data" type="date" />
    <button onclick="adicionarTarefa()">Adicionar Tarefa</button>
    <div id="lista-de-tarefas"></div>

    <script>
        
        let afazeres = JSON.parse(localStorage.getItem("afazeres")) || [
            { nome: "Lavar louÃ§a", data: "2025-08-15", id: "id1" },
            { nome: "Lavar banheiro", data: "2025-08-20", id: "id2" },
            { nome: "Estender roupa", data: "2025-08-25", id: "id3" },
            { nome: "Assistir o jogo do Corinthians", data: "2025-08-16", id: "id4" }
        ];

        let formatarData = (dataISO) => {
            return new Date(dataISO).toLocaleDateString("pt-BR");
        }

        let salvar = () => {
            localStorage.setItem("afazeres", JSON.stringify(afazeres));
        }

        let adicionarTarefa = () => {
            const campoTarefa = document.getElementById("tarefa");
            const tarefa = campoTarefa.value;

            const campoData = document.getElementById("seleciona-data");
            const prazo = campoData.value;

            if (tarefa.trim() === "" || prazo === "") {
                alert("Preencha a tarefa e a data!");
                return;
            }

            const cron = "" + new Date().getTime();

            afazeres.push({
                nome: tarefa,
                data: prazo,
                id: cron
            });

            salvar();
            campoTarefa.value = "";
            campoData.value = "";

            renderizar();
        }

        let apagarTarefa = (id) => {
            afazeres = afazeres.filter(tarefa => tarefa.id !== id);x1
            renderizar();
        }

        let renderizar = () => {
            const listaDeTarefas = document.getElementById("lista-de-tarefas");
            listaDeTarefas.innerHTML = "";

            afazeres.forEach((tarefa) => {
                const elemento = document.createElement("div");
                elemento.style.cursor = "pointer"; // deixa parecer clicÃ¡vel
                elemento.style.padding = "5px";
                elemento.style.borderBottom = "1px solid #ccc";
                
                elemento.innerText = `${tarefa.nome} - ${formatarData(tarefa.data)}`;

                // ao clicar, apaga a tarefa inteira
                elemento.onclick = () => apagarTarefa(tarefa.id);

                listaDeTarefas.appendChild(elemento);
            });
        }

        renderizar();
    </script>
</body>

</html>
